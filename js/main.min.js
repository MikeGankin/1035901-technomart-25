function init(){myMap=new ymaps.Map("map_canvas",{center:[59.93863106417265,30.3230545],zoom:17,controls:["zoomControl"]},{searchControlProvider:"yandex#search"}),myMap.geoObjects.add(new ymaps.Placemark([59.93863106417265,30.3230545],{balloonContent:"цвет <strong>голубой</strong>",iconCaption:"ул. Б. Конюшенная, д. 19/8"},{preset:"islands#dotIconWithCaption",iconCaptionMaxWidth:"200"}))}var mappopup=document.querySelector(".map-popup"),close=document.querySelector(".modal-close"),button=document.querySelector(".write-us-button"),popup=document.querySelector(".modal-contacts-popup"),link=document.querySelector(".map-link"),mapclose=document.querySelector(".map-close"),isStorageSupport=!0,storage="",chartPopup=document.querySelector(".modal-shoping-chart-popup"),priceButton=document.querySelector(".price-link");if(mappopup){var myMap;ymaps.ready(init);var nameInput=popup.querySelector("[name=name]"),emailInput=popup.querySelector("[name=email]"),form=popup.querySelector(".modal-form"),submit=popup.querySelector(".popup-button");try{storage=localStorage.getItem("nameInput")}catch(err){isStorageSupport=!1}button.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),storage?(nameInput.value=storage,emailInput.focus()):nameInput.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error")}),link.addEventListener("click",function(e){e.preventDefault(),mappopup.classList.add("modal-show")}),mapclose.addEventListener("click",function(e){e.preventDefault(),mappopup.classList.remove("modal-show")}),form.addEventListener("submit",function(e){nameInput.value&&emailInput.value?isStorageSupport&&localStorage.setItem("login",nameInput.value):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-show")&&(popup.classList.remove("modal-show"),popup.classList.remove("modal-error")))})}if(chartPopup){var continueButton=chartPopup.querySelector(".continue-button");priceButton.addEventListener("click",function(e){e.preventDefault(),chartPopup.classList.add("modal-show")}),close.addEventListener("click",function(e){e.preventDefault(),chartPopup.classList.remove("modal-show")}),continueButton.addEventListener("click",function(e){e.preventDefault(),chartPopup.classList.remove("modal-show")})}
